<!DOCTYPE html>
<html>
	<head>
		<title>PLEXCONNECT SETUP</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<script type="text/javascript">
			document.write("<base href='http://" + document.location.host + "/' />");
		</script>
		<link rel="stylesheet" type="text/css" href="support/setup/media/style.css">
		<!--[if gte IE 8]>
		<style type="text/css">
			.my-grid-form select{margin: 8px 0;font-size: 14px;width: 100%;padding: 4px}
		</style>
		<![endif]-->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script type="text/javascript" src="support/setup/gridforms/gridforms.js"></script>
		<script type="text/javascript" src="support/setup/script.js"></script>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	</head>
	<body>
		<div id="settings"></div>
		<div class="header">
			<img src="support/setup/media/images/plex.png" style="height:40px;"/>
			
			<h1>Plex<span>Connect</span></h1>
		</div>
		<br/><br/>
		<form id="main" class="my-grid-form" action="index.html" method="POST">
			<fieldset>
				<legend>Setup</legend>
				<div data-row-span="1" style="height:124px;">
					<div data-field-span="1" class="nofocus" >
						<label style="text-align:center;margin:0;">CHOOSE APP ON APPLE TV</label>
						<div id="apps">
							<a href="#"><img src="support/setup/media/images/trailers.png" class="trailer-cert"/></a>
							<a href="#"><img src="support/setup/media/images/imovie.png" class="imovie-cert" /></a>
							<a href="#"><img src="support/setup/media/images/wsj.png" class="wsj-cert"/></a>
						</div>
					</div>
				</div>
				<div data-row-span="4" >
					<div data-field-span="1" class="tooltip" title="In some environments PlexConnect is unable to figure out the local IP address of its host system, if this applies to your configuration, disable this and specify the ip address" >
						<label>auto detect IP</label>
						<input type="checkbox" name="enable_plexconnect_autodetect" id="enable_plexconnect_autodetect" />
					</div>
					<div data-field-span="2" class="enable_plexconnect_autodetect" >
						<label>Plex Connect IP</label>
						<input type="text" name="ip_plexconnect"  value="0.0.0.0" />
					</div>
					<div data-field-span="1" class="enable_plexconnect_autodetect tooltip" title="Your aTV will request data from ports 80 (http) as well as 443 (https). Change to port configuration of PlexConnect only if you have other means of handling the requests or port forwarding rules in place">
						<label>port</label>
						<input type="text" value="80" name="port_webserver" disabled id="port_webserver" />
					</div>
				</div>
				<div data-row-span="4">
					<div data-field-span="1" class="tooltip" title="If your PMS is not automatically discovered or it is showing the wrong IP, try disabling it and specify your PMS's IP (and port if using a non-standard one).<br/><br/>Auto discovery may get confused if you are running VMWare (or similar) or a VPN because of the IP addresses generated by these; the symptoms are usually that you cannot see your content thumbnails and content will not play.">
						<label >Auto Discover PMS</label>
						<input type="checkbox" name="enable_plexgdm" id="enable_plexgdm"   />
					</div>
					<div data-field-span="2" class="enable_plexgdm">
						<label>Plex Media Center IP </label>
						<input type="text" name="ip_pms" value="0.0.0.0" >
					</div>
					<div data-field-span="1" class="enable_plexgdm ">
						<label>port</label>
						<input type="text" name="port_pms" value="32400"  >
					</div>
				</div>
				
				<div data-row-span="4">
					<div data-field-span="1" title="You can disable the PlexConnect DNS server to do the DNS redirection for trailers.apple.com using your own DNS server or router." class="tooltip">
						<label class="tooltip">enable DNS SERVER</label>
						<input type="checkbox"  name="enable_dnsserver" id="enable_dnsserver"   />
					</div>
					<div data-field-span="2" class="enable_dnsserver tooltip" title="PlexConnect is setup by default to use Google's public DNS server to route all DNS enquiries for the other ATV apps, however because this hides your location from the content delivery networks you may find that some of the other applications slow down as content is not served from the nearest location to you.<br/><Br/>Alternatively may also wish to change this setting to make use of a DNS geo-unblocking service." >
						<label >DNS SERVER IP</label>
						<input type="text" value="8.8.8.8" id="dnsip" name="ip_dnsmaster" />
					</div>
					<div data-field-span="1" class="enable_dnsserver tooltip" title="When running in parallel to another DNS, e.g. on a NAS, you might want to push PlexConnect's DNS to another port. You can do so - just remember to install the correct port forwarding rules externally." >
						<label>port</label>
						<input type="text" value="53" name="port_dnsserver"/>
					</div>
				</div>
				
				<div data-row-span="5">
					<div data-field-span="1" class="tooltip" title="As long as you keep the ATV's DNS server setting pointed at PlexConnect this will prevent the aTV calling home to check for updates">
						<label>block atv updateS</label>
						<input type="checkbox" checked name="prevent_atv_update" id="prevent_atv_update"  />
					</div>
					
					<div data-field-span="1" class="tooltip" title="If disabled, or the port is modified, aTVs requests need to be handled externally.">
						<label>USE SSL</label>
						<input type="checkbox" checked name="enable_webserver_ssl" id="enable_webserver_ssl"  />
					</div>
					<div data-field-span="1" class="usessl">
						<label>port</label>
						<input type="text" name="port_ssl" value="443" >
					</div>
					<div data-field-span="1">
						<label>Log <a href="#" id="showlog">SHOW</a></label>
						<select name="loglevel" id="loglevel">
							<option value="Off">Off</option>
							<option value="Normal">Normal</option>
							<option value="High">High</option>
						</select>
					</div>
					<div data-field-span="1" class="bootdaemon tooltip" title="PlexConnect has to be started manually after a reboot.<br/><br/>Enable checkbox (and save) to start PlexConnect automatically in the background after a reboot">
						<label>Always running</label>
						<input type="checkbox"  name="bootdaemon" id="bootdaemon" />
					</div>
				</div>
				<div class="restarting">
					<div id="spin"></div><h4>SAVING...</h4><br/>
				</div>
				<br/>
				<div id="actions">
					<a href="#" id="stop" title="Stop PlexConnect" class="button" style="float: left;">STOP</a>
					<a href="#" id="start" title="Start PlexConnect" class="button" style="float: left;">&#9658;&nbsp;START</a>
					<a href="#" id="kill" title="Stop GUI" class="button" style="float: left;">EXIT GUI</a>
					<a href="#" id="save" title="SAVE CONFIGURATION" class="button" style="float: right;">SAVE CONFIGURATION</a>
				</div>
			</fieldset><br/>
			<input type="hidden" name="hosttointercept" />
			<input type="hidden" name="certfile" />
			<input type="hidden" name="config" value="">
		</form>
		<div id="introduction" class="my-grid-form">
			
			<fieldset>
				<legend>Welcome to PlexConnect!</legend>
				<div class="spacing">
					<div class="wizard">
						<h5>Please Read</h5>
						<p><strong>As we couldn't find the <em>Settings.cfg</em> file, this must be your first time starting PlexConnect.</strong><br/>
						Please read this background information in order to understand what happens under the hood.</p>
						<h5>How does it work ?</h5>
						<p>The basic idea is to:</p>
						<ul>
							<li>Re-use an already available app (like Apple Trailers, iMovie or Wall Street Journal)</li>
							<li>Re-route the request to your local Plex Media Server</li>
							<li>Re-work the reply to fit into AppleTV's XML communication scheme</li>
							<li>Let your AppleTV (iOS) do the rest</li>
						</ul><br/>
						<br style="clear:both"/>
					</div>
					<div class="wizard" style="text-align:center">
						<br/>
						<p ><strong>Choose the app you would like to use for PlexConnect</strong></p>
						<br/>
						<div id="apps-wizard">
							<a href="#" ><img src="support/setup/media/images/trailers.png" class="trailer-cert"/></a>
							<a href="#" ><img src="support/setup/media/images/imovie.png" class="imovie-cert"/></a>
							<a href="#" ><img src="support/setup/media/images/wsj.png" class="wsj-cert"/></a>
						</div>
						<br/><br/>
						<p style="text-align:center"><strong>NOTE: The AppleTV must be on the same network as the PlexConnect server.</strong></p>
					</div>
					<div class="wizard">
						<img src="support/setup/media/images/appletv.png"/><br/><br/>
						<h5>Configure your AppleTV to point to PlexConnect</h5>
						<p>On your AppleTV:</p>
						<ul>
							<li>Select: Settings > General > Network > Ethernet</li>
							<li>Select: Configure DNS and set to "Manual"</li>
							<li>Select: DNS</li>
							<li>Enter: <span id="ipaddress"></span></li>
							<li>Select: DONE</li>
						</ul>
						
						<h5>Install the SSL certificate on your AppleTV</h5>
						<p>On your AppleTV:</p>
						<ul>
							<li>Select: Settings > General</li>
							<li>Select: Send Data To Apple - set to "No"</li>
							<li>Press the "Play" button on: "Send Data To Apple" (do not use the normal "Select" button)<br/>You will be prompted to add a profile.</li>
							<li>Enter: <span id="setcert">You did not select an app in the previous screen!</span></li>
						</ul>
						<br style="clear:both"/>
					</div>
					<div class="wizard">
						<p><strong>Do you want PlexConnect to start automatically in the background after a reboot?</strong></p>
						<br style="clear:both"/>
						<a href="#" class="button" id="bootno">NO</a>
						<a href="#" class="button" id="bootyes">YES</a>
					</div>
					<div class="wizard">
						<h5>Final Notes</h5>
						<p>PlexConnect will be setup to use the default settings for the following:</p>
						<ul>
							<li>PlexConnect's IP will be autodetected using GDM</li>
							<li>The PlexConnect SSL port will be set to 443</li>
							<li>The PlexConnect webserver port will be set to 80</li>
							<li>The PlexMediaServer port will be set to 32400</li>
							<li>PlexMediaServer will be autodetected using GDM</li>
							<li>DNS lookups for the other AppleTV apps will use 8.8.8.8</li>
							<li>PlexConnect's DNS server port will be set to use port 53</li>
						</ul>
						<p>The above settings should are designed to work out of the box for the majority of users and should not be altered unless you know what you are doing.</p>
						<p>If you have any of these ports occupied by other services, please refer to the <a href="https://github.com/iBaa/PlexConnect/wiki/Settings-for-advanced-use-and-troubleshooting">advanced settings section</a> of the wiki before changing anything.</p><br/>
						<a href="#" class="button" id="setupdone">SAVE CONFIGURATION</a>
						<br/>
					</div>
				</div>
				<div class="restarting saveconfig">
					<div id="spin1"></div><h4>&nbsp;INSTALLING...STARTING UP</h4><br/>
				</div>
				<br/>
				<a href="#" class="button" style="float: right;margin:0 0 0 8px" id="wizardnext">NEXT &#8594;</a>
				<a href="#" class="button" style="float: right;margin:0" id="wizardprev">&#8592; BACK</a>
				<br style="clear:both"/>
			</fieldset>
		</div>
		
		<div id="log"></div>
		
	</body>
</html>